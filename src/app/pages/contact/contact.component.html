<div class="contact-page">
  <div class="container">
    <div class="page-header">
      <h1>AI Assistant & Contact</h1>
      <p>Get personalized product recommendations or reach out to us</p>
    </div>

    <div class="contact-content">
      <div class="ai-section">
        <mat-card class="ai-card">
          <mat-card-header>
            <div class="ai-header">
              <mat-icon>smart_toy</mat-icon>
              <div>
                <h2>AI Shopping Assistant</h2>
                <p>Describe what you're looking for and get personalized recommendations</p>
              </div>
            </div>
          </mat-card-header>

          <mat-card-content>
            <form [formGroup]="aiForm" class="ai-form" (ngSubmit)="onAIQuery()">
              <mat-form-field appearance="outline" class="full-width">
                <mat-label>What are you looking for?</mat-label>
                <textarea matInput formControlName="query" rows="3" 
                         placeholder="Example: I want a silver necklace under 50 TND for a special occasion..."></textarea>
                <mat-icon matSuffix>search</mat-icon>
                <mat-error>{{ getAIError() }}</mat-error>
              </mat-form-field>

              <button mat-raised-button color="primary" type="submit" class="ai-button" [disabled]="!aiForm.valid || isAILoading">
                <mat-icon>smart_toy</mat-icon>
                {{ isAILoading ? 'Searching...' : 'Get Recommendations' }}
                <mat-progress-spinner *ngIf="isAILoading" diameter="20" mode="indeterminate" class="spinner"></mat-progress-spinner>
              </button>
            </form>

            <div *ngIf="aiResponse" class="ai-response">
              <div class="response-header">
                <h3>AI Suggestions</h3>
                <button mat-icon-button (click)="clearAIResponse()" class="clear-btn">
                  <mat-icon>close</mat-icon>
                </button>
              </div>
              
              <p class="response-message">{{ aiResponse.message }}</p>
              
              <div *ngIf="suggestedProducts.length > 0" class="suggested-products">
                <h4>Recommended Products</h4>
                <div class="products-grid">
                  <mat-card *ngFor="let product of suggestedProducts" class="product-card">
                    <img mat-card-image [src]="product.image" [alt]="product.name">
                    <mat-card-content>
                      <h5>{{ product.name }}</h5>
                      <p class="price">{{ product.price }} TND</p>
                      <p class="description">{{ product.description }}</p>
                    </mat-card-content>
                    <mat-card-actions>
                      <button mat-button color="primary" [routerLink]="['/product', product.id]">
                        View Details
                      </button>
                    </mat-card-actions>
                  </mat-card>
                </div>
              </div>

              <div *ngIf="suggestedProducts.length === 0" class="no-suggestions">
                <mat-icon>search_off</mat-icon>
                <p>No products found matching your criteria. Try being more specific about your preferences.</p>
              </div>
            </div>

            <div class="ai-examples">
              <h4>Try asking:</h4>
              <div class="example-chips">
                <span class="example-chip" (click)="aiForm.patchValue({query: 'Show me silver jewelry under 40 TND'})">
                  "Silver jewelry under 40 TND"
                </span>
                <span class="example-chip" (click)="aiForm.patchValue({query: 'I need a gift for my mother'})">
                  "Gift for my mother"
                </span>
                <span class="example-chip" (click)="aiForm.patchValue({query: 'Elegant accessories for wedding'})">
                  "Wedding accessories"
                </span>
              </div>
            </div>
          </mat-card-content>
        </mat-card>
      </div>

      <div class="contact-section">
        <mat-card class="contact-card">
          <mat-card-header>
            <h2>Contact Us</h2>
            <p>Have questions? We'd love to hear from you</p>
          </mat-card-header>

          <mat-card-content>
            <form [formGroup]="contactForm" class="contact-form" (ngSubmit)="onContactSubmit()">
              <mat-form-field appearance="outline" class="full-width">
                <mat-label>Full Name</mat-label>
                <input matInput formControlName="name" required>
                <mat-icon matSuffix>person</mat-icon>
                <mat-error>{{ getContactError('name') }}</mat-error>
              </mat-form-field>

              <mat-form-field appearance="outline" class="full-width">
                <mat-label>Email Address</mat-label>
                <input matInput formControlName="email" type="email" required>
                <mat-icon matSuffix>email</mat-icon>
                <mat-error>{{ getContactError('email') }}</mat-error>
              </mat-form-field>

              <mat-form-field appearance="outline" class="full-width">
                <mat-label>Subject</mat-label>
                <input matInput formControlName="subject" required>
                <mat-icon matSuffix>subject</mat-icon>
                <mat-error>{{ getContactError('subject') }}</mat-error>
              </mat-form-field>

              <mat-form-field appearance="outline" class="full-width">
                <mat-label>Message</mat-label>
                <textarea matInput formControlName="message" rows="5" required></textarea>
                <mat-error>{{ getContactError('message') }}</mat-error>
              </mat-form-field>

              <button mat-raised-button color="primary" type="submit" class="contact-button" [disabled]="!contactForm.valid">
                <mat-icon>send</mat-icon>
                Send Message
              </button>
            </form>
          </mat-card-content>
        </mat-card>

        <div class="contact-info">
          <mat-card class="info-card">
            <mat-card-content>
              <div class="info-item">
                <mat-icon>phone</mat-icon>
                <div>
                  <h4>Phone</h4>
                  <p>+216 12 345 678</p>
                </div>
              </div>
              
              <div class="info-item">
                <mat-icon>email</mat-icon>
                <div>
                  <h4>Email</h4>
                  <p>hello#64;accessoriesstore.tn</p>
                </div>
              </div>
              
              <div class="info-item">
                <mat-icon>location_on</mat-icon>
                <div>
                  <h4>Address</h4>
                  <p>123 Avenue Habib Bourguiba<br>Tunis, Tunisia</p>
                </div>
              </div>
              
              <div class="info-item">
                <mat-icon>schedule</mat-icon>
                <div>
                  <h4>Business Hours</h4>
                  <p>Mon - Fri: 9:00 - 18:00<br>Sat: 10:00 - 16:00</p>
                </div>
              </div>
            </mat-card-content>
          </mat-card>
        </div>
      </div>
    </div>
  </div>
</div>